{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\keert\\\\Documents\\\\travel-buddy\\\\src\\\\paymentserver.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { jsPDF } from \"jspdf\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Payment() {\n  _s();\n  const [booked, setBooked] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const handlePayNow = async () => {\n    setLoading(true);\n    try {\n      // Create order\n      const orderRes = await fetch(\"http://localhost:5050/create-order\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          amount: 1000,\n          packageName: \"Test Package\"\n        })\n      });\n      if (!orderRes.ok) {\n        throw new Error(\"Failed to create order\");\n      }\n      const orderData = await orderRes.json();\n\n      // Verify payment success\n      const verifyRes = await fetch(\"http://localhost:5050/verify-payment\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          orderId: orderData.orderId,\n          paymentStatus: \"success\" // Normally you'd get this from payment gateway response\n        })\n      });\n      if (!verifyRes.ok) {\n        throw new Error(\"Failed to verify payment\");\n      }\n      const verifyData = await verifyRes.json();\n      if ((verifyData === null || verifyData === void 0 ? void 0 : verifyData.status) === \"success\") {\n        // Generate PDF receipt\n        generatePDF(orderData);\n        setBooked(true);\n      } else {\n        alert(\"Payment verification failed.\");\n      }\n    } catch (error) {\n      console.error(\"Error during payment:\", error);\n      alert(\"Something went wrong while processing the payment.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const generatePDF = orderData => {\n    var _orderData$amount;\n    const doc = new jsPDF();\n    doc.setFontSize(18);\n    doc.text(\"Payment Receipt\", 70, 20);\n    doc.setFontSize(12);\n    doc.text(`Order ID: ${orderData === null || orderData === void 0 ? void 0 : orderData.orderId}`, 20, 40);\n    doc.text(`Package: ${orderData === null || orderData === void 0 ? void 0 : orderData.packageName}`, 20, 50);\n    doc.text(`Amount: ₹${(_orderData$amount = orderData === null || orderData === void 0 ? void 0 : orderData.amount) !== null && _orderData$amount !== void 0 ? _orderData$amount : 1000}`, 20, 60);\n    doc.text(`Date: ${new Date().toLocaleString()}`, 20, 70);\n    doc.save(\"payment_receipt.pdf\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"20px\",\n      fontFamily: \"Arial\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Payment Page\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handlePayNow,\n      disabled: loading || booked,\n      style: {\n        padding: \"10px 20px\",\n        fontSize: \"16px\"\n      },\n      children: loading ? \"Processing...\" : \"Pay Now\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), booked && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: \"20px\",\n        color: \"green\",\n        fontWeight: \"bold\"\n      },\n      children: \"\\u2705 Booking Successful! Receipt downloaded.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n_s(Payment, \"cxjWQ/RTVxapawzClk873KM2tr0=\");\n_c = Payment;\nvar _c;\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"names":["React","useState","jsPDF","jsxDEV","_jsxDEV","Payment","_s","booked","setBooked","loading","setLoading","handlePayNow","orderRes","fetch","method","headers","body","JSON","stringify","amount","packageName","ok","Error","orderData","json","verifyRes","orderId","paymentStatus","verifyData","status","generatePDF","alert","error","console","_orderData$amount","doc","setFontSize","text","Date","toLocaleString","save","style","padding","fontFamily","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","fontSize","marginTop","color","fontWeight","_c","$RefreshReg$"],"sources":["C:/Users/keert/Documents/travel-buddy/src/paymentserver.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { jsPDF } from \"jspdf\";\r\n\r\nexport default function Payment() {\r\n  const [booked, setBooked] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handlePayNow = async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Create order\r\n      const orderRes = await fetch(\"http://localhost:5050/create-order\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ amount: 1000, packageName: \"Test Package\" }),\r\n      });\r\n\r\n      if (!orderRes.ok) {\r\n        throw new Error(\"Failed to create order\");\r\n      }\r\n\r\n      const orderData = await orderRes.json();\r\n\r\n      // Verify payment success\r\n      const verifyRes = await fetch(\"http://localhost:5050/verify-payment\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          orderId: orderData.orderId,\r\n          paymentStatus: \"success\", // Normally you'd get this from payment gateway response\r\n        }),\r\n      });\r\n\r\n      if (!verifyRes.ok) {\r\n        throw new Error(\"Failed to verify payment\");\r\n      }\r\n\r\n      const verifyData = await verifyRes.json();\r\n\r\n      if (verifyData?.status === \"success\") {\r\n        // Generate PDF receipt\r\n        generatePDF(orderData);\r\n        setBooked(true);\r\n      } else {\r\n        alert(\"Payment verification failed.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error during payment:\", error);\r\n      alert(\"Something went wrong while processing the payment.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const generatePDF = (orderData) => {\r\n    const doc = new jsPDF();\r\n\r\n    doc.setFontSize(18);\r\n    doc.text(\"Payment Receipt\", 70, 20);\r\n\r\n    doc.setFontSize(12);\r\n    doc.text(`Order ID: ${orderData?.orderId}`, 20, 40);\r\n    doc.text(`Package: ${orderData?.packageName}`, 20, 50);\r\n    doc.text(`Amount: ₹${orderData?.amount ?? 1000}`, 20, 60);\r\n    doc.text(`Date: ${new Date().toLocaleString()}`, 20, 70);\r\n\r\n    doc.save(\"payment_receipt.pdf\");\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: \"20px\", fontFamily: \"Arial\" }}>\r\n      <h2>Payment Page</h2>\r\n\r\n      <button onClick={handlePayNow} disabled={loading || booked} style={{ padding: \"10px 20px\", fontSize: \"16px\" }}>\r\n        {loading ? \"Processing...\" : \"Pay Now\"}\r\n      </button>\r\n\r\n      {booked && (\r\n        <div style={{ marginTop: \"20px\", color: \"green\", fontWeight: \"bold\" }}>\r\n          ✅ Booking Successful! Receipt downloaded.\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}